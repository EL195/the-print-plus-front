<div class="container" style="margin-top:50px">
    <div class="main-body">
          <div class="row gutters-sm">
            <div class="col-md-4 mb-3">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex flex-column align-items-center text-center">
                   <!--  <img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="Admin" class="rounded-circle" width="150"> -->
                    <div class="mt-3">
                      <h4>{{user.fisrt_name}} {{user.last_name}}</h4>
<!--                       <p class="text-secondary mb-1">Full Stack Developer</p>
                      <p class="text-muted font-size-sm">Bay Area, San Francisco, CA</p> -->
                      <button (click)="logout()" class="btn btn-primary">Déconnexion</button>
                    </div>
                  </div>
                </div>
              </div>




              <div class="card mt-3">
                <ul class="list-group list-group-flush">
                  <li (click)="tab='orders'" class="hand list-group-item d-flex justify-content-between align-items-center flex-wrap">
                    <h6 class="mb-0" >Mes commandes</h6>
                  </li>

                  <li (click)="tab='addresses'" class="hand list-group-item d-flex justify-content-between align-items-center flex-wrap">
                    <h6 class="mb-0">Mes adresses</h6>
                  </li>
                  <li (click)="tab='profile'" class="hand list-group-item d-flex justify-content-between align-items-center flex-wrap">
                    <h6 class="mb-0">Mon profil</h6>
                  </li>
                  <li (click)="tab='security'" class="hand list-group-item d-flex justify-content-between align-items-center flex-wrap">
                    <h6 class="mb-0">Mot de passe</h6>
                  </li>
                </ul>
              </div>
            </div>
            
            <div  *ngIf="tab=='addresses'" class="col-md-8">
              <h4>Mon Addresse</h4>
              <div class="card mb-3" *ngIf="edit_a==true">
                <div class="card-body">
                  <form #f="ngForm" (ngSubmit)="editadresse(f)">
                      <div class="row">
                        <div class="col-lg-12">
                              <div class="form-group mb-1">
                                  <label for="exampleInputPassword1">Téléphone</label>
                                  <international-phone-number class="form-control" [(ngModel)]="infos.phone" [value]="infos.phone" [maxlength]="20"  [locale]="'en'" [required]="true"  name="phone" ></international-phone-number>
                                 <!--  <input type="text" [(ngModel)]="infos.phone" name="phone" [value]="infos.phone" class="form-control" id="exampleInputPassword1" /> -->
                              </div>
                          </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-4">
                                  <div class="form-group mb-1">
                                      <label for="exampleInputPassword1">Pays</label>
                                     <!--  <input type="text" [(ngModel)]="infos.pays" name="pays" [value]="infos.pays" class="form-control" id="exampleInputPassword1" /> -->
                                      <select [(ngModel)]="infos.pays" name="pays" class="form-control" aria-label=".form-select-lg example">
                                        <option [value]="infos.pays">{{infos.pays || "Veuillez sélectionner un pays"}}</option>
                                        <option *ngFor="let contry of myData;" value="contry.text">{{contry.text}}</option>
                                      </select>
                                  </div>
                              </div>
                              <div class="col-lg-4">
                                  <div class="form-group mb-1">
                                      <label for="exampleInputPassword1">Région</label>
                                      <input type="text" [(ngModel)]="infos.region" name="region" [value]="infos.region" class="form-control" id="exampleInputPassword1" />
                                  </div>
                              </div>
                              <div class="col-lg-4">
                                <div class="form-group mb-1">
                                    <label for="exampleInputPassword1">Ville</label>
                                    <input type="text" [(ngModel)]="infos.ville" name="ville" [value]="infos.ville" class="form-control" id="exampleInputPassword1" />
                                </div>
                              </div>
                          </div>
                          <div class="row">
                            <div class="col-lg-6">
                              <div class="form-group mb-1">
                                  <label for="exampleInputPassword1">Adresse</label>
                                  <input type="text" [(ngModel)]="infos.rue" name="rue" [value]="infos.rue" class="form-control" id="exampleInputPassword1" />
                              </div>
                            </div>

                          <div class="col-lg-6">
                            <div class="form-group mb-1">
                                <label for="exampleInputPassword1">Boite postale</label>
                                <input type="text" [(ngModel)]="infos.po" name="po" [value]="infos.po" class="form-control" id="exampleInputPassword1" />
                            </div>
                        </div>
                          </div>
                        <button type="submit"  class="btn btn-info">Valider</button>
                    </form>
                </div>
              </div>

              <div class="card mb-3" *ngIf="edit_a==false">
                <div class="card-body">
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Téléphone</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{infos.phone}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Pays</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{infos.pays}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Région</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{infos.region}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Ville</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{infos.ville}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Boite postale</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{infos.po}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Addresse</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{infos.rue}}
                    </div>
                  </div>


                  <hr>
                  <div class="row">
                    <div class="col-sm-12">
                      <span (click)="edit_a=true" class="btn btn-info" target="__blank" >Modifier</span>
                    </div>
                  </div>
                </div>
              </div>







            </div>
            <div  *ngIf="tab=='orders'" class="col-md-8">
              <h4>Mes commandes</h4>
              <div *ngIf="orders?.length==0">
                <p>Aucune commande trouvées sur votre compte.</p>
              </div>
              <ol class="list-group list-group-numbered">
                <li *ngFor="let item of orders;" class="list-group-item d-flex justify-content-between align-items-start">
                  <div class="ms-2 me-auto">
                    <div class="fw-bold">Commande #{{item.id}}</div>
                      <p><b>Méthode : </b>{{item.shipping_method}}</p>
                      <p><b>Date : </b>{{item.updated_at}}</p>
                  </div>
                  <span class="price">{{item.shipping_total}} {{item.currency}}</span>
                </li>
              </ol>
            </div>


            <div  *ngIf="tab=='profile'" class="col-md-8">
              <div class="card mb-3" *ngIf="edit==false">
                <div class="card-body">
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Nom</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{user.last_name}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Prénom</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{user.fisrt_name}}
                    </div>
                  </div>
                  <hr>
                  <div *ngIf="user.email" class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Email</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{user.email}}
                    </div>
                  </div>
                 
                  <div class="row" *ngIf="user.phone">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Phone</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      {{user.phone}}
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-12">
                      <span (click)="edit=true" class="btn btn-info" target="__blank" >Modifier</span>
                    </div>
                  </div>
                </div>
              </div>




              <div class="card mb-3" *ngIf="edit==true">
                <div class="card-body">
                    <form #f="ngForm" (ngSubmit)="profile(f)">
                      <div class="row">
                        <div class="col-lg-6">
                              <div class="form-group mb-1">
                                  <label for="exampleInputPassword1">Prénom</label>
                                  <input type="text" [(ngModel)]="user.fisrt_name" name="prenom" [value]="user.fisrt_name" class="form-control" id="exampleInputPassword1" />
                              </div>
                          </div>
                          <div class="col-lg-6">
                              <div class="form-group mb-1">
                                  <label for="exampleInputPassword1">Nom</label>
                                  <input type="text" [(ngModel)]="user.last_name" name="nom" [value]="user.last_name" class="form-control" id="exampleInputPassword1" />
                              </div>
                          </div>
                        </div>
                        <button type="submit" class="btn btn-info">Valider</button>
                    </form>
                </div>
              </div>
            </div>



            <div  *ngIf="tab=='security'" class="col-md-8">
              <h5>Changer le mot de passe</h5>
              <div class="card mb-3">
                <div class="card-body">
                    <form>
                      <div class="row">
                        <div class="col-lg-12" style="background-color: white;">
                          <label for="exampleInputEmail1">Ancien mot de passe</label>
                            <div class="input-group mb-1">
                                
                                <input [type]="showo ? 'text' : 'password'" [(ngModel)]="opassword" name="opassword" class="form-control"  id="exampleInputPassword1" />
                                <span (click)="passwordo()" class="hand input-group-text">{{showo ? 'Voir' : 'Cacher'}}</span>
                            </div>
                        </div>
                        <div class="col-lg-6" style="background-color: white;">
                          <label for="exampleInputEmail1">Nouveau mot de passe</label>
                            <div class="input-group mb-1">
                              <input [type]="show ? 'text' : 'password'" [(ngModel)]="password"  name="password" class="form-control" id="exampleInputPassword1" />
                              <span (click)="passwordv()" class="hand input-group-text">{{show ? 'Voir' : 'Cacher'}}</span>
                          </div>
                          </div>
                          <div class="col-lg-6" style="background-color: white;">
                            <label for="exampleInputEmail1">Repéter le nouveau mot de passe</label>
                            <div class="input-group mb-1">
                              <input [type]="showc ? 'text' : 'password'" [(ngModel)]="cpassword"  name="cpassword" class="form-control" id="exampleInputPassword1" />
                              <span (click)="passwordc()" class="hand input-group-text">{{showc ? 'Voir' : 'Cacher'}}</span>
                          </div>
                          </div>
                        </div>
                        <button type="btn" (click)="pass()" class="btn btn-info">Valider</button>
                    </form>
                </div>
              </div>
            </div>
          </div>

        </div>
    </div>